IT자산장부
사내 IT 자산 대여·반납·검수·반납관리 프로세스 DB 설계(MVP)

==================================================

1. 프로젝트 개요
사내 IT 자산(노트북/모니터/태블릿/모바일 단말 등)의
자산 등록 → 대여/출고 → 반납 요청 → 반납/검수 → (수리 여부 판정) → 가용 복귀/수리 처리 전 과정을
단일 데이터 모델로 관리한다.

본 프로젝트는 기존의 “정산(연체료/수리비/보증금 차감·환급)”을 제거하고,
대신 반납관리 시스템(반납 요구/경고/제재)을 도입하여 미반납/지연 반납을 체계적으로 통제한다.

목적은 아래를 이력 기반으로 재현 가능하게 만드는 것이다.
- 누가 어떤 자산을 언제부터 사용했는지
- 반납 검수 결과와 증빙이 무엇인지(비용 산정은 하지 않음)
- 반납예정일 경과 시점부터 어떤 알림/경고가 발생했는지, 누적 미반납 횟수가 얼마인지

--------------------------------------------------

2. 배경 및 문제 정의
자산 현황 파악과 이력 신뢰도 제고를 위해 DB 기반 표준화가 필요하다.

2.1 운영 리스크
- 분실/중복 지급/재고 불일치/미반납 관리가 어려워진다.

2.2 추가 필요 이슈
- 역할 간 인수인계 구간에서 데이터가 끊겨 자산의 “대여~반납~검수” 흐름을 단일하게 추적하기 어렵고,
  반납 지연 발생 시 원인 분석 및 후속 조치(요구/경고/제재)가 체계적으로 수행되지 못한다.

--------------------------------------------------

3. 목표(성공 기준)
- 자산 단위(자산태그/시리얼)로 단일 개체 추적 가능
- 대여/반납 요청/반납 검수/수리 여부 판정을 분리하여 책임 경계와 근거 데이터 확보
- 상태 전이를 이력 기반으로 관리하여 상태 역전이 발생하지 않도록 설계
- 반납예정일 경과 및 미반납 누적 횟수 기반으로 요구/경고가 자동 발생하도록 설계

--------------------------------------------------

4. 범위(스코프)

4.1 MVP 범위
- 자산 등록/상태 관리(가용/대여중/반납대기/검수중/수리중/폐기 등)
- 렌탈 계약 생성
- 자산 할당
- 출고 처리
- 반납 요청
- 반납/검수(판정 및 증빙 첨부)
- 수리 여부 판정(수리 필요/불필요)
- 반납관리(반납요구 메시지, 미반납 누적 경고 메시지, 대여 제한 등 제재 단계의 데이터화)
- 조회/통계(재고, 사용중, 미반납, 반납요구/경고 발생 현황)

4.2 확장 범위
- B2B 조달/공급 연계: PO, 공급사, Shipment, Receiving, RMA 등 외부/공급 흐름
- 계약 유형 확장 및 외부 시스템 연동(협력사/장기 임차/회계 시스템 등)
- 리포트 고도화(부서별 현황, 자산 회전율, 미반납 빈도/패턴 등)

--------------------------------------------------

5. 사용자(역할)

5.1 사용자(임차사 담당자)
- 대여 자산 확인
- 반납 요청 등록
- 반납/검수 결과 확인
- 반납요구/경고 메시지 확인

5.2 관리자
- 고객사 자산관리자: 자산 등록, 상태 관리, 반납/검수 수행, 수리 처리(상태 전환)
- 렌탈 담당자: 렌탈 계약 생성, 자산 할당, 출고 처리
- 운영 관리자(반납관리): 반납요구/경고/제재 정책 설정 및 대상 관리(필요 시 자산관리자와 동일 역할로 통합 가능)

--------------------------------------------------

6. 핵심 시나리오(업무 흐름)

6.1 공통 진입
1) 서비스 접속
2) 로그인
3) 역할 선택(자산관리자/렌탈담당/임차사/운영관리)

6.2 자산 등록 및 대여/출고
1) 자산관리자가 자산을 등록하고 가용(AVAILABLE) 상태로 전환한다.
2) 렌탈 담당자가 렌탈 계약을 생성한다.
3) 렌탈 담당자가 자산을 계약에 할당한다.
4) 렌탈 담당자가 출고 처리하여 자산 상태를 대여중(RENTED)으로 전환한다.
5) 시스템은 반납예정일(due_date)을 기준으로 반납관리 타이머를 활성화한다.

6.3 반납 요청 및 반납/검수(수리여부만 확인)
1) 임차사 담당자가 반납 요청(return_request)을 등록한다.
2) 자산관리자가 자산을 회수하고 반납/검수를 수행한다.
3) 검수 결과로 수리 여부만 판정하고 증빙(사진/메모)을 등록한다.
   - 수리 필요: 자산 상태를 수리중(UNDER_REPAIR) 또는 수리필요(REPAIR_REQUIRED)로 전환
   - 수리 불필요: 자산 상태를 가용(AVAILABLE)로 복귀
4) 수리 완료 시 자산 상태를 가용(AVAILABLE)로 복귀한다.

6.4 반납관리(반납예정일 경과 알림/경고/제재)
1) 시스템은 대여 건의 반납예정일(due_date)을 기준으로 “경과 여부”를 판단한다.
2) 반납예정일이 경과했고 아직 반납 완료가 아니라면, 반납 요구 메시지를 출력/발송한다.
3) 미반납이 누적될 경우, 미반납 누적 횟수를 증가시키고 정책 기준에 따라 경고 메시지를 출력/발송한다.
   - 예: 미반납 누적 3회 이상 → 경고 메시지 출력
4) 경고 단계 이후 제재를 적용한다(데이터로 관리).
   - 예: 대여 신청 제한, 승인 보류, 특정 기간 대여 금지 등

--------------------------------------------------

7. 기능(역할별)

7.1 사용자(임차사 담당자)
- 대여 확인: 본인/조직에 할당된 자산, 대여기간, 반납예정일 조회
- 반납 요청: 반납 의사 등록, 반납 일정 입력
- 결과 확인: 검수 완료 여부, 수리 필요 여부, 자산 상태 확인
- 반납관리 메시지 확인: 반납요구/경고 메시지 확인, 조치 이력 확인

7.2 관리자
- 고객사 자산관리자
  - 자산 등록/수정/폐기, 상태 변경 및 이력 기록
  - 반납/검수 등록(수리여부 판정 + 증빙 첨부)
  - 수리 처리(수리중 전환, 수리 완료 후 가용 복귀)
- 렌탈 담당자
  - 렌탈 계약 생성/관리
  - 자산 할당 및 출고 처리
  - 반납예정일 설정/변경(정책에 따라 권한 제한 가능)
- 운영 관리자(반납관리)
  - 반납요구 메시지 발생 조건 관리(예: due_date 경과 즉시)
  - 경고 기준 관리(예: 미반납 누적 3회 이상)
  - 제재 정책 단계 관리(예: 대여 제한/승인 보류)
  - 메시지/경고/제재 이력 조회 및 대상자 관리

--------------------------------------------------

8. 데이터 설계 방향성(컬럼 네이밍/가독성)
요구사항명세서 작성 시, 컬럼은 역할이 명확히 드러나도록 동사/이벤트 기반으로 명명한다.
- 이벤트 시각: *_at (checked_out_at, due_at, return_requested_at, returned_at, inspected_at, warning_sent_at)
- 행위자: *_by (checked_out_by, inspected_by, restriction_applied_by)
- boolean: is_* (is_return_overdue, is_repair_required, is_restricted)
- 수치: *_count, *_days (overdue_days, overdue_count, warning_count)
- 상태: status + 상태 이력 테이블로 분리

--------------------------------------------------

9. 용어 통일
- 자산(asset): 자산태그/시리얼로 식별되는 단일 자산
- 렌탈 계약(rental_contract): 대여 관계의 계약 단위
- 자산 할당(asset_assignment): 계약 또는 사용자에게 자산을 배정하는 행위/데이터
- 출고(check_out): 물리적 출고 처리 이벤트
- 반납예정일(due_date): 반납 기준일(반납관리의 기준)
- 반납 요청(return_request): 사용자의 반납 의사 등록
- 반납/검수(inspection): 회수 후 수리 여부를 판정하고 증빙을 기록하는 행위/데이터
- 수리 여부(repair_required): 수리 필요/불필요 판정 값
- 반납 요구 메시지(return_demand_message): due_date 경과 시 반납을 요구하는 시스템 메시지
- 미반납 누적(overdue_count): 미반납 발생 누적 횟수(정책 판단 기준)
- 경고 메시지(warning_message): 미반납 누적 기준 초과 시 출력/발송되는 경고
- 제재(restriction): 경고 이후 대여 제한 등의 통제 조치(옵션)

--------------------------------------------------

10. 설계 원칙
- 자산 유니크: 회사 단위로 asset_tag, serial_no 유니크 권장
- 책임 단위 분리: 계약/할당/출고/반납요청/검수/반납관리(알림/경고/제재)를 분리하여 근거 데이터 확보
- 이력 우선: 상태 변경 및 메시지/경고/제재는 이력 테이블로 남겨 변경 주체/시각/사유 추적 가능하게 설계
- 근거 데이터 고정: overdue_count, warning_count, restriction_level 등은 이벤트 발생 시점의 값을 이력에 저장
- 증빙 분리: 검수 사진/파일/메모는 별도 증빙 엔터티로 다건 첨부 가능하게 설계
- 상태 코드 통일: 문서/ERD/SQL 전 구간 동일 코드 사용(혼용 금지)

--------------------------------------------------

11. 산출물(계획)
1) 프로젝트 주제 선정
2) 프로젝트 개요
3) 프로젝트 기획서 제작
3.5) 프로젝트 시나리오 / 유스케이스 구성
4) 요구명세서 제작
5) ERD 제작
6) 테이블 명세서 제작
